/*
* Kendo UI Complete v2013.2.918 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Complete commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-complete-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(define){return define(["./kendo.scheduler.view.min"],function(){!function(e){function t(e){var t=new Date(1980,1,1,0,0,0);return o(t,p(e)),t}function a(e,t,a){var s,n=t.getTime(),i=a.getTime();return s=e.getTime(),s>=n&&i>=s}function s(e,t,a,s){return s=s?a>=e:a>e,e>t&&s}function n(e,t,a,s){var n,r=e._continuousEvents,o=r[r.length-1],l=c(t.start.startDate()).getTime();if(s&&o&&c(o.start.startDate()).getTime()==l){for(n=r.length-1;n>-1&&!(r[n].isAllDay||c(r[n].start.startDate()).getTime()<l);n--);r.splice(n+1,0,{element:a,isAllDay:!0,uid:a.attr(i.attr("uid")),start:t.start,end:t.end})}else r.push({element:a,isAllDay:s,uid:a.attr(i.attr("uid")),start:t.start,end:t.end})}var i=window.kendo,r=i.ui,o=i.date.setTime,l=r.SchedulerView,d=e.extend,h=e.proxy,c=i.date.getDate,u=i.date.MS_PER_MINUTE,f=i.date.MS_PER_DAY,p=i.date.getMilliseconds,m=".kendoMultiDayView",v=i.template('<div title="(#=kendo.format("{0:t} - {1:t}", start, end)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template k-event-time">#:kendo.format("{0:t} - {1:t}", start, end)#</div><div class="k-event-template">${title}</div></div>'),g=i.template('<div title="(#=kendo.format("{0:t}", start)#): #=title.replace(/"/g,"&\\#34;")#"><div class="k-event-template">${title}</div></div>'),_=i.template("<span class='k-link k-nav-day'>#=kendo.toString(date, 'ddd M/dd')#</span>"),D='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#"#if (resources[0]) { #style="background-color:#=resources[0].color#; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#" #} else {#class="k-event"#}#><span class="k-event-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-w"></span>#}## if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}## if(data.head || data.middle) {#<span class="k-icon k-i-arrow-e"></span>#}#</span>#if(resizable && !singleDay && !data.tail && !data.middle){#<span class="k-resize-handle k-resize-w"></span>#}##if(resizable && !singleDay && !data.head && !data.middle){#<span class="k-resize-handle k-resize-e"></span>#}#</div>',y='<div role="gridcell" aria-selected="false" data-#=ns#uid="#=uid#" #if (resources[0]) { #style="background-color:#=resources[0].color #; border-color: #=resources[0].color#"class="k-event#=inverseColor ? " k-event-inverse" : ""#"#} else {#class="k-event"#}#><span class="k-event-actions"># if(data.isException()) {#<span class="k-icon k-i-exception"></span># } else if(data.isRecurring()) {#<span class="k-icon k-i-refresh"></span># } #</span>{0}<span class="k-event-actions">#if (showDelete) {#<a href="\\#" class="k-link k-event-delete"><span class="k-icon k-si-close"></span></a>#}#</span><span class="k-event-top-actions"># if(data.tail || data.middle) {#<span class="k-icon k-i-arrow-n"></span># } #</span><span class="k-event-bottom-actions"># if(data.head || data.middle) {#<span class="k-icon k-i-arrow-s"></span># } #</span># if(resizable && !data.tail && !data.middle) {#<span class="k-resize-handle k-resize-n"></span># } ## if(resizable && !data.head && !data.middle) {#<span class="k-resize-handle k-resize-s"></span># } #</div>',k=l.extend({init:function(e,t){var a=this;l.fn.init.call(a,e,t),a.title=a.options.title||a.options.name,a._templates(),a._editable(),a.calculateDateRange(),a._groups()},_updateResizeHint:function(e,t,a){var s,n,r,o,d,h,c,u,f=e.isMultiDay(),p=this.groups[a.groupIndex],m=p.ranges(t.start,e.isAllDay?a.start:a.end,f,e.isAllDay);for(this._removeResizeHint(),s=0;s<m.length;s++)n=m[s],r=n.startSlot(),o=r.offsetWidth,d=r.clientHeight,f?o=n.innerWidth():d=n.innerHeight(),h=l.fn._createResizeHint.call(this,this._scrollbarOffset(r.offsetLeft,f),r.offsetTop,o,d),this._resizeHint=this._resizeHint.add(h);c="t",u=this.content,f&&(c="M/dd",u=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),u.length||(u=this.content)),this._resizeHint.appendTo(u),this._resizeHint.find(".k-label-top,.k-label-bottom").text(""),this._resizeHint.first().addClass("k-first").find(".k-label-top").text(i.toString(t.startDate(),c)),this._resizeHint.last().addClass("k-last").find(".k-label-bottom").text(i.toString(a.endDate(),c))},_updateMoveHint:function(e,t,a){var s,n,r,o,l,d,h=e.isMultiDay(),c=this.groups[a.groupIndex],u=a.start-t.start,f=i.date.toUtcTime(e.start)+u,m=f+e.duration(),v=c.ranges(f,m,h,e.isAllDay);for(f=i.timezone.apply(new Date(f),"Etc/UTC"),m=i.timezone.apply(new Date(m),"Etc/UTC"),this._removeMoveHint(),!h&&(0===p(m)||p(m)<p(this.startTime()))&&v.length>1&&v.pop(),s=0;s<v.length;s++)n=v[s],r=n.start,o=this._createEventElement(e.clone({start:f,startTime:f,end:m,endTime:m}),!h),o.addClass("k-event-drag-hint"),l={left:r.offsetLeft+2,top:r.offsetTop},this._isRtl&&(l.left=.1*r.clientWidth+this._scrollbarOffset(r.offsetLeft)+2),h?l.width=n.innerWidth()-4:(l.height=n.innerHeight()-3,l.width=.9*r.clientWidth-4),o.css(l),this._moveHint=this._moveHint.add(o);d=this.content,h&&(d=this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day) > div"),d.length||(d=this.content)),this._moveHint.appendTo(d)},_slotByPosition:function(e,t){var a,s,n,i;for(s=this._isVerticallyGrouped()?this.content.offset():this.element.find(".k-scheduler-header-wrap:has(.k-scheduler-header-all-day)").find(">div").offset(),s&&(e-=s.left,t-=s.top),e=Math.ceil(e),t=Math.ceil(t),i=0;i<this.groups.length;i++)if(n=this.groups[i],a=n.daySlotByPosition(e,t))return a;for(s&&(e+=s.left,t+=s.top),s=this.content.offset(),e-=s.left,t-=s.top,t+=this.content[0].scrollTop,e+=this.content[0].scrollLeft,e=Math.ceil(e),t=Math.ceil(t),i=0;i<this.groups.length;i++)if(n=this.groups[i],a=n.timeSlotByPosition(e,t))return a;return null},_groupCount:function(){var e=this.groupedResources;return e.length?"vertical"===this._groupOrientation()?this._rowCountForLevel(e.length-1):this._columnCountForLevel(e.length)/this._columnOffsetForResource(e.length):1},_columnCountInResourceView:function(){var e=this.groupedResources;return!e.length||this._isVerticallyGrouped()?this._columnCountForLevel(0):this._columnOffsetForResource(e.length)},_timeSlotGroups:function(e,t){var a,s,n,i,r,o,l,d,h,c,u,f,m,v,g,_,D=this._timeSlotInterval(),y=this.content.find("tr:not(.k-scheduler-header-all-day)");for(y.attr("role","row"),a=y.length,this._isVerticallyGrouped()&&(a=Math.floor(a/e)),s=0;e>s;s++)for(n=0,this._isVerticallyGrouped()&&(n=s),i=n*a,o=0,this._isVerticallyGrouped()||(o=s);(n+1)*a>i;){for(l=y[i].children,d=this.groups[s],0===i%a&&(r=p(new Date(+this.startTime()))),h=o*t;(o+1)*t>h;h++)c=l[h],u=h%t,f=d.getTimeSlotCollection(u),m=this._dates[u],v=Date.UTC(m.getFullYear(),m.getMonth(),m.getDate()),g=v+r,_=g+D,c.setAttribute("role","gridcell"),c.setAttribute("aria-selected",!1),f.addTimeSlot(c,g,_);r+=D,i++}},_daySlotGroups:function(e,t){var a,s,n,r,o,l,d,h,c,u,f,p;for(a=this._isVerticallyGrouped()?this.element.find(".k-scheduler-header-all-day"):this.element.find(".k-scheduler-header-all-day tr"),a.attr("role","row"),s=0;e>s;s++)for(n=0,this._isVerticallyGrouped()&&(n=s),r=this.groups[s],o=r.getDaySlotCollection(0),l=a[n].children,d=0,this._isVerticallyGrouped()||(d=s),h=0,c=d*t;(d+1)*t>c;c++)u=l[c],0===c%t&&(h=0),f=i.date.addDays(this.startDate(),h),p=Date.UTC(f.getFullYear(),f.getMonth(),f.getDate()),h++,u.setAttribute("role","gridcell"),u.setAttribute("aria-selected",!1),o.addDaySlot(u,p,p+i.date.MS_PER_DAY)},_groups:function(){var e,t,a,s=this._groupCount(),n=this._columnCountInResourceView();for(this.groups=[],e=0;s>e;e++){for(t=this._addResourceView(e),a=0;n>a;a++)t.addTimeSlotCollection(this._dates[a],i.date.addDays(this._dates[a],1));t.addDaySlotCollection(this._dates[0],this._dates[this._dates.length-1])}this._timeSlotGroups(s,n),this.options.allDaySlot&&this._daySlotGroups(s,n)},options:{name:"MultiDayView",selectedDateFormat:"{0:D}",allDaySlot:!0,workDay:!1,title:"",startTime:i.date.today(),endTime:i.date.today(),minorTickCount:2,majorTick:60,majorTimeHeaderTemplate:"#=kendo.toString(date, 't')#",minorTimeHeaderTemplate:"&nbsp;",eventTemplate:v,allDayEventTemplate:g,dateHeaderTemplate:_,editable:!0,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),footer:{command:"workDay"},messages:{allDay:"all day",showFullDay:"Show full day",showWorkDay:"Show business hours"}},events:["remove","add","edit"],_templates:function(){var e=this.options,t=d({},i.Template,e.templateSettings);this.eventTemplate=this._eventTmpl(e.eventTemplate,y),this.allDayEventTemplate=this._eventTmpl(e.allDayEventTemplate,D),this.majorTimeHeaderTemplate=i.template(e.majorTimeHeaderTemplate,t),this.minorTimeHeaderTemplate=i.template(e.minorTimeHeaderTemplate,t),this.dateHeaderTemplate=i.template(e.dateHeaderTemplate,t)},_editable:function(){this.options.editable&&(i.support.mobileOS?this._touchEditable():this._mouseEditable())},_mouseEditable:function(){var t=this;t.element.on("click"+m,".k-event a:has(.k-si-close)",function(a){t.trigger("remove",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),a.preventDefault()}),t.options.editable.create!==!1&&t.element.on("dblclick"+m,".k-scheduler-content td",function(a){var s,n;e(this).parent().hasClass("k-scheduler-header-all-day")||(s=t._slotByPosition(a.pageX,a.pageY),n=t._resourceBySlot(s),t.trigger("add",{eventInfo:d({start:s.startDate(),end:s.endDate()},n)}),a.preventDefault())}).on("dblclick"+m,".k-scheduler-header-all-day td",function(e){var a=t._slotByPosition(e.pageX,e.pageY),s=t._resourceBySlot(a);t.trigger("add",{eventInfo:d({},{isAllDay:!0,start:i.date.getDate(a.startDate()),end:i.date.getDate(a.startDate())},s)}),e.preventDefault()}),t.options.editable.update!==!1&&t.element.on("dblclick"+m,".k-event",function(a){t.trigger("edit",{uid:e(this).closest(".k-event").attr(i.attr("uid"))}),a.preventDefault()})},_touchEditable:function(){var t=this;t._closeUserEvents=new i.UserEvents(t.element,{filter:".k-event a:has(.k-si-close)",tap:function(a){t.trigger("remove",{uid:e(a.target).closest(".k-event").attr(i.attr("uid"))}),a.preventDefault()}}),t.options.editable.create!==!1&&(t._addUserEvents=new i.UserEvents(t.element,{filter:".k-scheduler-content td",tap:function(a){var s,n;e(a.target).parent().hasClass("k-scheduler-header-all-day")||(s=t._slotByPosition(a.x.location,a.y.location),n=t._resourceBySlot(s),t.trigger("add",{eventInfo:d({start:s.startDate(),end:s.endDate()},n)}),a.preventDefault())}}),t._allDayUserEvents=new i.UserEvents(t.element,{filter:".k-scheduler-header-all-day td",tap:function(e){var a=t._slotByPosition(e.x.location,e.y.location),s=t._resourceBySlot(a);t.trigger("add",{eventInfo:d({},{isAllDay:!0,start:i.date.getDate(a.startDate()),end:i.date.getDate(a.endDate())},s)}),e.preventDefault()}})),t.options.editable.update!==!1&&(t._editUserEvents=new i.UserEvents(t.element,{filter:".k-event.k-state-selected",tap:function(a){0===e(a.event.target).closest("a:has(.k-si-close)").length&&(t.trigger("edit",{uid:e(a.target).closest(".k-event").attr(i.attr("uid"))}),a.preventDefault())}}))},_layout:function(e){var t,a,s,n=[],r=[],o=this.options,l=this;for(t=0;t<e.length;t++)a={},a.text=l.dateHeaderTemplate({date:e[t]}),i.date.isToday(e[t])&&(a.className="k-today"),n.push(a);return o.allDaySlot&&r.push({text:o.messages.allDay,allDay:!0}),this._forTimeRange(this.startTime(),this.endTime(),function(e,t,a,s){var n=t?l.majorTimeHeaderTemplate:l.minorTimeHeaderTemplate,i={text:n({date:e}),className:s?"k-slot-cell":""};r.push(i)}),s=this.groupedResources,s.length&&("vertical"===this._groupOrientation()?r=this._createRowsLayout(s,r):n=this._createColumnsLayout(s,n)),{columns:n,rows:r}},_footer:function(){var t,a,s,n=this.options;n.footer!==!1&&(t='<div class="k-header k-scheduler-footer">',a=n.footer.command,a&&"workDay"===a?(t+='<ul class="k-reset k-header k-toolbar">',t+='<li class="k-state-default k-scheduler-fullday"><a href="#" class="k-link"><span class="k-icon k-i-clock"></span>',t+=(n.workDay?n.messages.showFullDay:n.messages.showWorkDay)+"</a></li>",t+="</ul>"):t+="&nbsp;",t+="</div>",this.footer=e(t).appendTo(this.element),s=this,this.footer.on("click"+m,".k-scheduler-fullday",function(e){e.preventDefault(),s.trigger("navigate",{view:s.name||n.name,date:s.startDate(),isWorkDay:!n.workDay})}))},_forTimeRange:function(e,a,s,n){var i,r,l,d,h,c,m,v,g,_,D,y,k,T,w,E;for(e=t(e),a=t(a),l=this,d=p(e),h=p(a),c=l.options.minorTickCount,m=l.options.majorTick*u,v=m/c||1,g=new Date(+e),_=g.getDate(),D=0,y="",r=f/v,d!=h&&(d>h&&(h+=f),r=(h-d)/v),r=Math.round(r);r>D;D++)k=D%(m/v),T=0===k,w=c-1>k,E=k===c-1,y+=s(g,T,w,E),o(g,v,!1);return h&&(i=p(g),_<g.getDate()&&(i+=f),i>h&&(g=new Date(+a))),n&&(y+=n(g)),y},_content:function(e){var t,a,s=this,n=s.options,r=s.startTime(),o=this.endTime(),l=1,d=1,h=e.length,c="",u=this.groupedResources,f="";for(u.length&&("vertical"===s._groupOrientation()?(d=this._rowCountForLevel(this.rowLevels.length-2),n.allDaySlot&&(f='<tr class="k-scheduler-header-all-day">'+Array(e.length+1).join("<td>&nbsp;</td>")+"</tr>")):l=this._columnCountForLevel(this.columnLevels.length-2)),c+="<tbody>",t=function(t,a){var s,n,r,o="";for(o="<tr"+(a?' class="k-middle-row"':"")+">",r=0;l>r;r++)for(s=0,n=h;n>s;s++)o+="<td"+(i.date.isToday(e[s])?' class="k-today"':"")+">",o+="&nbsp;</td>";return o+="</tr>"},a=0;d>a;a++)c+=f,c+=this._forTimeRange(r,o,t);c+="</tbody>",this.content.find("table").append(c)},_render:function(t){var a,s=this;t=t||[],this._dates=t,this._startDate=t[0],this._endDate=t[t.length-1||0],this.createLayout(this._layout(t)),this._content(t),this._footer(),this.refreshLayout(),a=this.element.find(".k-scheduler-header-all-day td"),a.length&&(this._allDayHeaderHeight=a.first()[0].clientHeight),s.datesHeader.on("click"+m,".k-nav-day",function(t){var a=e(t.currentTarget).closest("th"),n=a.offset(),i=s._slotByPosition(n.left,n.top+a.outerHeight());s.trigger("navigate",{view:"day",date:i.startDate()})})},startTime:function(){var e=this.options;return e.workDay?e.workDayStart:e.startTime},endTime:function(){var e=this.options;return e.workDay?e.workDayEnd:e.endTime},startDate:function(){return this._startDate},endDate:function(){return this._endDate},_end:function(e){var t=p(this.endTime())||f;return e&&(t=0),new Date(this._endDate.getTime()+t)},nextDate:function(){return i.date.nextDay(this.endDate())},previousDate:function(){return i.date.previousDay(this.startDate())},calculateDateRange:function(){this._render([this.options.date])},destroy:function(){var e=this;e.datesHeader&&e.datesHeader.off(m),e.element&&e.element.off(m),l.fn.destroy.call(this),e.footer&&e.footer.remove(),i.support.mobileOS&&(e._closeUserEvents.destroy(),e.options.editable.create!==!1&&(e._addUserEvents.destroy(),e._allDayUserEvents.destroy()),e.options.editable.update!==!1&&e._editUserEvents.destroy())},selectionByElement:function(e){var t=e.offset();return this._slotByPosition(t.left,t.top)},_timeSlotInterval:function(){var e=this.options;return e.majorTick/e.minorTickCount*u},_columnCountInGroup:function(){var e=this.groupedResources;return e.length?this._columnOffsetForResource(e.length):0},_rowCountInGroup:function(){var e,t=this.groupedResources;return t.length?(e=this.options.allDaySlot?this._rowCountForLevel(t.length-1):0,(this._rowCountForLevel(t.length)-e)/this._rowCountForLevel(t.length-1)):0},_timeSlotIndex:function(e){var t=this.options,a=p(e),s=p(this.startTime()),n=t.majorTick/t.minorTickCount*u;return(a-s)/n},_collectionIndex:function(e,t){return t?0:this._dateSlotIndex(e,!0)},_slotIndex:function(e,t){return t?this._dateSlotIndex(e):this._timeSlotIndex(e)},_dateIndex:function(e){var t,s,n,r,o=this._dates||[];for(t=0,s=o.length;s>t;t++)if(n=i.date.getDate(o[t]),r=new Date(i.date.getDate(o[t]).getTime()+f-1),a(e,n,r))return t;return-1},_dateSlotIndex:function(e,t){var s,n,r,o,l=this._dates||[],d=1;for(s=0,n=l.length;n>s;s++)if(r=i.date.getDate(l[s]),o=new Date(i.date.getDate(l[s]).getTime()+f-(t?0:1)),a(e,r,o))return s*d;return-1},_positionAllDayEvent:function(t,a){var s,n,i,r,o,d,h,c=a.innerWidth(),u=a.start.index,f=a.end.index,p=l.collidingEvents(a.events(),u,f),m=this._headerColumnCount||0,v=2,g=u!==f?5:4,_=this._allDayHeaderHeight,D=a.startSlot();for(t.css({left:this._scrollbarOffset(D.offsetLeft+v,!0),width:c-g}),a.addEvent({start:u,end:f,element:t}),p.push({start:u,end:f,element:t}),s=l.createRows(p),s.length&&s.length>m&&(this._updateAllDayHeaderHeight(_*s.length+_),this._headerColumnCount=s.length),n=a.start.offsetTop,i=0,r=s.length;r>i;i++)for(o=s[i].events,d=0,h=o.length;h>d;d++)e(o[d].element).css({top:n+i*_})},_arrangeColumns:function(e,t){var a,s,n,i,r,o,d,h,c,u,f,p=t.start.index,m=t.end.index;for(e={element:e,start:p,end:m},n=t.start.clientWidth,i=.1*n,r=t.events(),o=l.collidingEvents(r,e.start,e.end),t.addEvent(e),o.push(e),a=l.createColumns(o),d=(n-i)/a.length,h=0,c=a.length;c>h;h++)for(s=a[h].events,u=0,f=s.length;f>u;u++)s[u].element[0].style.width=d-4+"px",s[u].element[0].style.left=(this._isRtl?this._scrollbarOffset(i):0)+t.start.offsetLeft+h*d+2+"px"},_positionEvent:function(e,t,a){var s=4;t.css({height:a.innerHeight()-s,top:a.start.offsetTop}),this._arrangeColumns(t,a)},_eventTmpl:function(e,t){var a,s=this.options,n=d({},i.Template,s.templateSettings),r=n.paramName,o="",l=typeof e,c={storage:{},count:0};return"function"===l?(c.storage["tmpl"+c.count]=e,o+="#=this.tmpl"+c.count+"("+r+")#",c.count++):"string"===l&&(o+=e),a=i.template(i.format(t,o),n),c.count>0&&(a=h(a,c.storage)),a},_createEventElement:function(t,s,n,r){var o,l,h,u=s?this.eventTemplate:this.allDayEventTemplate,m=this.options,v=m.editable,g=v&&v.destroy!==!1,_=v&&v.resize!==!1,D=c(this.startDate()),y=c(this.endDate()),k=p(this.startTime()),T=p(this.endTime()),w=p(t.startTime||t.start),E=p(t.endTime||t.end);return k>=T&&(T=p(new Date(this.endTime().getTime()+f-1))),s||t.isAllDay||(y=new Date(y.getTime()+f)),l=t.end,t.isAllDay&&(l=c(t.end)),!a(c(t.start),D,y)&&!a(l,D,y)||s&&k>w&&E>T?o=!0:c(t.start)<D||s&&k>w?r=!0:(l>y&&!s||s&&E>T)&&(n=!0),h=this.eventResources(t),e(u(d({},{ns:i.ns,resizable:_,showDelete:g,middle:o,head:n,tail:r,singleDay:1==this._dates.length,resources:h,inverseColor:h&&h[0]?this._shouldInverseResourceColor(h[0]):!1},t,{start:t.startTime||t.start,end:t.endTime||t.end})))},_isInTimeSlot:function(e){var t,a=this.startTime(),n=this.endTime(),r=e.startTime||e.start,l=e.endTime||e.end;return p(n)===p(i.date.getDate(n))&&(n=i.date.getDate(n),o(n,f-1)),i.date.getDate(l)>i.date.getDate(r)&&(l=i.date.getDate(l),o(l,f-1)),l=p(l),r=p(r),n=p(n),a=p(a),a===r&&r===l?!0:(t=!0,s(r,a,n,t)||s(l,a,n,t)||s(a,r,l)||s(n,r,l))},_isInDateSlot:function(e){var t=this.startDate(),s=new Date(this.endDate().getTime()+f-1);return(a(e.start,t,s)||a(e.end,t,s)||a(t,e.start,e.end)||a(s,e.start,e.end))&&(!a(e.end,t,t)||a(e.end,e.start,e.start)||e.isAllDay)},_updateAllDayHeaderHeight:function(e){var t,a=this.element.find(".k-scheduler-header-all-day td");if(a.length)for(a.parent().add(this.element.find(".k-scheduler-times-all-day").parent()).height(e),t=0;t<this.groups.length;t++)this.groups[t].refresh()},_renderEvents:function(e,t){var a,s,i,r,o,l,d,h,c,u,p,m,v,g,_,D=this.datesHeader.find(".k-scheduler-header-wrap > div");for(s=0,i=e.length;i>s;s++)if(a=e[s],this._isInDateSlot(a))if(r=a.isAllDay||a.end.getTime()-a.start.getTime()>=f,o=r&&!this._isVerticallyGrouped()?D:this.content,r)this.options.allDaySlot&&(h=this.groups[t],h._continuousEvents||(h._continuousEvents=[]),d=h.slotRanges(a),l=this._createEventElement(a,!r),this._positionAllDayEvent(l,d[0]),n(h,d[0],l,!0),l.appendTo(o));else if(this._isInTimeSlot(a))for(h=this.groups[t],h._continuousEvents||(h._continuousEvents=[]),d=h.slotRanges(a),c=d.length,u=0;c>u;u++)p=d[u],m=a.start,v=a.end,c>1&&(0===u?v=p.end.endDate():u==c-1?m=p.start.startDate():(m=p.start.startDate(),v=p.end.endDate())),g=a.clone({start:m,end:v}),this._isInTimeSlot(g)&&(_=p.head,l=this._createEventElement(a,!r,_,p.tail),this._positionEvent(g,l,p),n(h,p,l,!1),l.appendTo(o))},render:function(e){this._headerColumnCount=0,this._groups(),this.element.find(".k-event").remove(),this._updateAllDayHeaderHeight(this._allDayHeaderHeight),e=new i.data.Query(e).sort([{field:"start",dir:"asc"},{field:"end",dir:"desc"}]).toArray();var t=this.groupedResources;t.length?this._renderGroups(e,t,0):this._renderEvents(e,0,0),this.refreshLayout(),this.trigger("activate")},_renderGroups:function(e,t,a){var s,n,r,o,d=t[0];if(d)for(s=d.dataSource.view(),n=0;n<s.length;n++)r=this._resourceValue(d,s[n]),o=new i.data.Query(e).filter({field:d.field,operator:l.groupEqFilter(r)}).toArray(),t.length>1?a=this._renderGroups(o,t.slice(1),a++):this._renderEvents(o,a++);return a},_columnOffsetForResource:function(e){return this._columnCountForLevel(e)/this._columnCountForLevel(e-1)},_columnCountForLevel:function(e){var t=this.columnLevels[e];return t?t.length:0},_rowCountForLevel:function(e){var t=this.rowLevels[e];return t?t.length:0},clearSelection:function(){this.content.add(this.datesHeader).find(".k-state-selected").removeAttr("id").attr("aria-selected",!1).removeClass("k-state-selected")},_updateDirection:function(e,t,a,s,n){var i=e.isAllDay,r=t[0].start,o=t[t.length-1].end;a&&(n?i||r.index!==o.index||r.collectionIndex!==o.collectionIndex||(e.backward=s):(i&&r.index===o.index||!i&&r.collectionIndex===o.collectionIndex)&&(e.backward=s))},_changeViewPeriod:function(e,t,a){var s,n,i,r;return a?undefined:(s=t?this.previousDate():this.nextDate(),n=e.start,i=e.end,e.start=new Date(s),e.end=new Date(s),r=e.isAllDay?f:p(i),o(e.start,p(n)),o(e.end,r),this._isVerticallyGrouped()||(e.groupIndex=t?this.groups.length-1:0),e.events=[],!0)}});d(!0,r,{MultiDayView:k,DayView:k.extend({options:{title:"Day"},name:"day"}),WeekView:k.extend({options:{title:"Week",selectedDateFormat:"{0:D} - {1:D}"},name:"week",calculateDateRange:function(){var e,t,a=this.options.date,s=i.date.dayOfWeek(a,this.calendarInfo().firstDay,-1),n=[];for(e=0,t=7;t>e;e++)n.push(s),s=i.date.nextDay(s);this._render(n)}})})}(window.kendo.jQuery)})}("function"==typeof define&&define.amd?define:function(e,t){return t()});